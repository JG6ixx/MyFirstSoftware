CREATE TABLE CLIENTE (
    id_cliente INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    cpf VARCHAR(20) UNIQUE NOT NULL,
    telefone VARCHAR(20),
    email VARCHAR(100),
    endereco VARCHAR(150)
);

CREATE TABLE VENDEDOR (
    id_vendedor INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    telefone VARCHAR(20)
);

CREATE TABLE PRODUTO (
    id_produto INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    descricao VARCHAR(150),
    valor DECIMAL(10,2) NOT NULL
);

CREATE TABLE VENDA (
    id_venda INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    id_cliente INT NOT NULL,
    id_vendedor INT NOT NULL,
    data_venda DATE NOT NULL,
    forma_pagamento VARCHAR(30) NOT NULL,
    total_venda DECIMAL(10,2) NOT NULL,

    CONSTRAINT fk_venda_cliente 
        FOREIGN KEY (id_cliente) REFERENCES CLIENTE(id_cliente),

    CONSTRAINT fk_venda_vendedor 
        FOREIGN KEY (id_vendedor) REFERENCES VENDEDOR(id_vendedor)
);

CREATE TABLE ITEM_VENDA (
    id_item INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    id_venda INT NOT NULL,
    id_produto INT NOT NULL,
    quantidade INT NOT NULL,
    subtotal DECIMAL(10,2) NOT NULL,
	desconto int,

    CONSTRAINT fk_item_venda 
        FOREIGN KEY (id_venda) REFERENCES VENDA(id_venda),

    CONSTRAINT fk_item_produto 
        FOREIGN KEY (id_produto) REFERENCES PRODUTO(id_produto)
);
